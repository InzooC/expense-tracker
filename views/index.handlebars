<div class="container mt-5" style="max-width: 1000px;">

  <!-- search bar -->
  <div class="input-group mb-3" style="width: 800px; margin: 0 auto">
    <form action="/filter" method="POST" class="container">
      {{#if filterCategory}}
      <select class="custom-select" name="category" id="category" onchange="this.form.submit()">
        <option value="{{ categoryNumber }}" selected>{{ category }}</option>
        {{#each filterCategory}}
        <option value="{{ this.id }}">{{ this.name }}</option>
        {{/each}}
      </select>
      {{else}}
      <select class="custom-select" id="category" name="category" onchange="this.form.submit()">
        <option value="0">類別</option>
        <option value="1">家居物業</option>
        <option value="2">交通出行</option>
        <option value="3">休閒娛樂</option>
        <option value="4">餐飲食品</option>
        <option value="5">其他</option>
      </select>
      {{/if}}
    </form>
  </div>

  <table class="table table-striped table-borderless" style="width: 800px; margin: 0 auto;">
    <thead>
      <tr>
        <th scope="col" style="vertical-align: top;font-size: 30px; width: 20%;">總金額：
        </th>
        <th scope="col" style="text-align: end; color:coral; font-size: 50px; width: 33%;">{{ totalAmount }}
        </th>
      </tr>
    </thead>
    <tbody>
      {{#each userRecords}}
      <tr>
        <td style="vertical-align: middle;">
          <i class="{{this.icon}}" style="color:lightskyblue; font-size: 40px;"></i>
        </td>
        <td style="width: 20%;">
          <p class="mb-0" style="font-size: 20px;">{{ this.name }}</p>
          <span style="font-size: 10px;">{{ this.formateDate }}</span>
        </td>
        <td style="text-align: end; vertical-align: middle; width: 20%; font-size: 20px;">
          {{ this.amount }}
        </td>
        <td style="vertical-align: middle; margin: 0 auto; text-align: center;">
          <a href="/record/{{ this._id }}/edit" style="text-decoration:none; color:gray; border: 1px gray none;"
            class=" btn btn btn-outline-secondary">修改</a>
        </td>
        <td style="vertical-align: middle; margin: 0 auto; text-align: center;">
          <form action="/record/{{this._id}}?_method=DELETE" method="POST">
            <button type="submit" class="btn btn-outline-secondary"
              style="text-decoration:none; color:gray; border: 1px gray none;"
              onclick="return confirm(`確定刪除{{ this.name }} 這個紀錄？`)">刪除</button>
          </form>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <div class="mt-3" style="width: 800px; margin: 0 auto; text-align: center;">
    <div style="margin: 0 auto;">
      <a href="/record/new" style="text-decoration:none;">
        <button type="button" style="background-color:rgb(215, 100, 46); color:aliceblue; min-width: 150px;"
          class="btn mx-3">
          新增支出
        </button>
      </a>
    </div>
  </div>
</div>